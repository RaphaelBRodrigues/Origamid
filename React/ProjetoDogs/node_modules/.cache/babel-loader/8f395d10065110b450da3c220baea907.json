{"ast":null,"code":"import _regeneratorRuntime from\"/home/raphael/Desktop/Origamid/React/ProjetoDogs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/raphael/Desktop/Origamid/React/ProjetoDogs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/raphael/Desktop/Origamid/React/ProjetoDogs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/raphael/Desktop/Origamid/React/ProjetoDogs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{useNavigate}from'react-router-dom';import React from'react';import styles from'./photopost.module.css';import Input from'../../../../Components/Form/Input';import Button from'../../../../Components/Form/Button';import Error from'../../../../Components/Helper/Error';import useForm from'../../../../Hooks/useForm';import useFetch from'../../../../Hooks/useFetch';import{PHOTO_POST}from'../../../../api';function PhotoPost(){var nome=useForm();var peso=useForm('number');var idade=useForm('number');var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),img=_React$useState2[0],setImg=_React$useState2[1];var _useFetch=useFetch(),request=_useFetch.request,error=_useFetch.error,loading=_useFetch.loading,data=_useFetch.data;var navigate=useNavigate();React.useEffect(function(){if(!error&&data){navigate('/conta');}},[data,navigate]);function handleImgChange(_ref){var target=_ref.target;setImg({preview:URL.createObjectURL(target.files[0]),raw:target.files[0]});}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,token,_PHOTO_POST,url,options;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append('img',img.raw);formData.append('nome',nome.value);formData.append('peso',peso.value);formData.append('idade',idade.value);token=window.localStorage.getItem('token');_PHOTO_POST=PHOTO_POST(formData,token),url=_PHOTO_POST.url,options=_PHOTO_POST.options;_context.next=10;return request(url,options);case 10:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"section\",{className:\"\".concat(styles.photoPost,\" animeLeft\"),children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({},nome),{},{label:\"Nome\",type:\"text\",name:\"nome\"})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({},peso),{},{label:\"Peso\",type:\"number\",name:\"peso\"})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({},idade),{},{label:\"Idade\",type:\"number\",name:\"idade\"})),/*#__PURE__*/_jsx(\"input\",{className:styles.file,onChange:handleImgChange,label:\"img\",type:\"file\",name:\"img\"}),loading?/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Carregando...\"}):/*#__PURE__*/_jsx(Button,{children:\"Enviar\"})]}),img.preview&&/*#__PURE__*/_jsx(\"div\",{className:styles.preview,style:{backgroundImage:\"url('\".concat(img.preview,\"')\")}}),/*#__PURE__*/_jsx(Error,{error:error})]});}export default PhotoPost;","map":{"version":3,"sources":["/home/raphael/Desktop/Origamid/React/ProjetoDogs/src/Pages/User/Components/PhotoPost/index.js"],"names":["useNavigate","React","styles","Input","Button","Error","useForm","useFetch","PHOTO_POST","PhotoPost","nome","peso","idade","useState","img","setImg","request","error","loading","data","navigate","useEffect","handleImgChange","target","preview","URL","createObjectURL","files","raw","handleSubmit","e","preventDefault","formData","FormData","append","value","token","window","localStorage","getItem","url","options","photoPost","file","backgroundImage"],"mappings":"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","sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport React from 'react';\nimport styles from './photopost.module.css';\nimport Input from '../../../../Components/Form/Input';\nimport Button from '../../../../Components/Form/Button';\nimport Error from '../../../../Components/Helper/Error';\nimport useForm from '../../../../Hooks/useForm';\nimport useFetch from '../../../../Hooks/useFetch';\nimport { PHOTO_POST } from '../../../../api';\n\nfunction PhotoPost() {\n  const nome = useForm();\n  const peso = useForm('number');\n  const idade = useForm('number');\n  const [img, setImg] = React.useState({});\n  const { request, error, loading, data } = useFetch();\n  const navigate = useNavigate();\n  React.useEffect(() => {\n    if (!error && data) {\n      navigate('/conta');\n    }\n  }, [data, navigate]);\n\n  function handleImgChange({ target }) {\n    setImg({\n      preview: URL.createObjectURL(target.files[0]),\n      raw: target.files[0],\n    });\n  }\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const formData = new FormData();\n\n    formData.append('img', img.raw);\n    formData.append('nome', nome.value);\n    formData.append('peso', peso.value);\n    formData.append('idade', idade.value);\n\n    const token = window.localStorage.getItem('token');\n    const { url, options } = PHOTO_POST(formData, token);\n\n    await request(url, options);\n  }\n\n  return (\n    <section className={`${styles.photoPost} animeLeft`}>\n      <form onSubmit={handleSubmit}>\n        <Input {...nome} label=\"Nome\" type=\"text\" name=\"nome\" />\n        <Input {...peso} label=\"Peso\" type=\"number\" name=\"peso\" />\n        <Input {...idade} label=\"Idade\" type=\"number\" name=\"idade\" />\n        <input\n          className={styles.file}\n          onChange={handleImgChange}\n          label=\"img\"\n          type=\"file\"\n          name=\"img\"\n        />\n\n        {loading ? (\n          <Button disabled>Carregando...</Button>\n        ) : (\n          <Button>Enviar</Button>\n        )}\n      </form>\n      {img.preview && (\n        <div\n          className={styles.preview}\n          style={{ backgroundImage: `url('${img.preview}')` }}\n        ></div>\n      )}\n      <Error error={error} />\n    </section>\n  );\n}\n\nexport default PhotoPost;\n"]},"metadata":{},"sourceType":"module"}