{"ast":null,"code":"import _toConsumableArray from\"/home/raphael/Desktop/Origamid/React/ProjetoDogs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/raphael/Desktop/Origamid/React/ProjetoDogs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import style from'./feed.module.css';import Modal from'./Modal';import Photos from'./Photos';function Feed(_ref){var user=_ref.user;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),modalPhoto=_React$useState2[0],setModalPhoto=_React$useState2[1];var _React$useState3=React.useState([1]),_React$useState4=_slicedToArray(_React$useState3,2),pages=_React$useState4[0],setPages=_React$useState4[1];var _React$useState5=React.useState(true),_React$useState6=_slicedToArray(_React$useState5,2),infinite=_React$useState6[0],setInfinite=_React$useState6[1];React.useEffect(function(){var wait=false;function infiniteScroll(){if(infinite){var scroll=window.scrollY;var height=document.body.offsetHeight-window.innerHeight;if(scroll>height*0.75&!wait){setPages(function(pags){return[].concat(_toConsumableArray(pags),[pages.length+1]);});wait=true;setTimeout(function(){wait=false;},500);}}}window.addEventListener('wheel',infiniteScroll);window.addEventListener('scroll',infiniteScroll);return function(){window.removeEventListener('wheel',infiniteScroll);window.removeEventListener('scroll',infiniteScroll);};},[infinite]);return/*#__PURE__*/_jsxs(\"div\",{className:style.teste,children:[modalPhoto&&/*#__PURE__*/_jsx(Modal,{setModalPhoto:setModalPhoto,photo:modalPhoto}),pages.map(function(page){return/*#__PURE__*/_jsx(Photos,{setInfinite:setInfinite,user:user,page:page,setModalPhoto:setModalPhoto},page);})]});}Feed.defaultProps={user:0};export default Feed;","map":{"version":3,"sources":["/home/raphael/Desktop/Origamid/React/ProjetoDogs/src/Components/Feed/index.js"],"names":["React","style","Modal","Photos","Feed","user","useState","modalPhoto","setModalPhoto","pages","setPages","infinite","setInfinite","useEffect","wait","infiniteScroll","scroll","window","scrollY","height","document","body","offsetHeight","innerHeight","pags","length","setTimeout","addEventListener","removeEventListener","teste","map","page","defaultProps"],"mappings":"8aAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CAGA,QAASC,CAAAA,IAAT,MAAwB,IAARC,CAAAA,IAAQ,MAARA,IAAQ,qBACcL,KAAK,CAACM,QAAN,CAAe,IAAf,CADd,oDACfC,UADe,qBACHC,aADG,0CAEIR,KAAK,CAACM,QAAN,CAAe,CAAC,CAAD,CAAf,CAFJ,qDAEfG,KAFe,qBAERC,QAFQ,0CAGUV,KAAK,CAACM,QAAN,CAAe,IAAf,CAHV,qDAGfK,QAHe,qBAGLC,WAHK,qBAKtBZ,KAAK,CAACa,SAAN,CAAgB,UAAM,CACpB,GAAIC,CAAAA,IAAI,CAAG,KAAX,CACA,QAASC,CAAAA,cAAT,EAA0B,CACxB,GAAIJ,QAAJ,CAAc,CACZ,GAAMK,CAAAA,MAAM,CAAGC,MAAM,CAACC,OAAtB,CACA,GAAMC,CAAAA,MAAM,CAAGC,QAAQ,CAACC,IAAT,CAAcC,YAAd,CAA6BL,MAAM,CAACM,WAAnD,CAEA,GAAKP,MAAM,CAAGG,MAAM,CAAG,IAAnB,CAA2B,CAACL,IAAhC,CAAsC,CACpCJ,QAAQ,CAAC,SAACc,IAAD,CAAU,CACjB,mCAAWA,IAAX,GAAiBf,KAAK,CAACgB,MAAN,CAAe,CAAhC,GACD,CAFO,CAAR,CAGAX,IAAI,CAAG,IAAP,CACAY,UAAU,CAAC,UAAM,CACfZ,IAAI,CAAG,KAAP,CACD,CAFS,CAEP,GAFO,CAAV,CAGD,CACF,CACF,CAEDG,MAAM,CAACU,gBAAP,CAAwB,OAAxB,CAAiCZ,cAAjC,EACAE,MAAM,CAACU,gBAAP,CAAwB,QAAxB,CAAkCZ,cAAlC,EACA,MAAO,WAAM,CACXE,MAAM,CAACW,mBAAP,CAA2B,OAA3B,CAAoCb,cAApC,EACAE,MAAM,CAACW,mBAAP,CAA2B,QAA3B,CAAqCb,cAArC,EACD,CAHD,CAID,CAzBD,CAyBG,CAACJ,QAAD,CAzBH,EA2BA,mBACE,aAAK,SAAS,CAAEV,KAAK,CAAC4B,KAAtB,WACGtB,UAAU,eAAI,KAAC,KAAD,EAAO,aAAa,CAAEC,aAAtB,CAAqC,KAAK,CAAED,UAA5C,EADjB,CAGGE,KAAK,CAACqB,GAAN,CAAU,SAACC,IAAD,CAAU,CACnB,mBACE,KAAC,MAAD,EACE,WAAW,CAAEnB,WADf,CAEE,IAAI,CAAEP,IAFR,CAIE,IAAI,CAAE0B,IAJR,CAKE,aAAa,CAAEvB,aALjB,EAGOuB,IAHP,CADF,CASD,CAVA,CAHH,GADF,CAiBD,CAED3B,IAAI,CAAC4B,YAAL,CAAoB,CAClB3B,IAAI,CAAE,CADY,CAApB,CAWA,cAAeD,CAAAA,IAAf","sourcesContent":["import React from 'react';\nimport style from './feed.module.css';\nimport Modal from './Modal';\nimport Photos from './Photos';\nimport PropTypes from 'prop-types';\n\nfunction Feed({ user }) {\n  const [modalPhoto, setModalPhoto] = React.useState(null);\n  const [pages, setPages] = React.useState([1]);\n  const [infinite, setInfinite] = React.useState(true);\n\n  React.useEffect(() => {\n    let wait = false;\n    function infiniteScroll() {\n      if (infinite) {\n        const scroll = window.scrollY;\n        const height = document.body.offsetHeight - window.innerHeight;\n\n        if ((scroll > height * 0.75) & !wait) {\n          setPages((pags) => {\n            return [...pags, pages.length + 1];\n          });\n          wait = true;\n          setTimeout(() => {\n            wait = false;\n          }, 500);\n        }\n      }\n    }\n\n    window.addEventListener('wheel', infiniteScroll);\n    window.addEventListener('scroll', infiniteScroll);\n    return () => {\n      window.removeEventListener('wheel', infiniteScroll);\n      window.removeEventListener('scroll', infiniteScroll);\n    };\n  }, [infinite]);\n\n  return (\n    <div className={style.teste}>\n      {modalPhoto && <Modal setModalPhoto={setModalPhoto} photo={modalPhoto} />}\n\n      {pages.map((page) => {\n        return (\n          <Photos\n            setInfinite={setInfinite}\n            user={user}\n            key={page}\n            page={page}\n            setModalPhoto={setModalPhoto}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nFeed.defaultProps = {\n  user: 0,\n};\n\nFeed.propTypes = {\n  user: PropTypes.oneOfType([\n    PropTypes.string.isRequired,\n    PropTypes.number.isRequired,\n  ]),\n};\n\nexport default Feed;\n"]},"metadata":{},"sourceType":"module"}